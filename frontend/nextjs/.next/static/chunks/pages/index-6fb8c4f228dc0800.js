(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3775)}])},3775:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return pages}});var r=n(5893),o=n(6171),i=n(2729),l=n(8806);function _templateObject(){let e=(0,i._)(["\n  subscription {\n    listCreated {\n      id\n      title\n      todos {\n        id\n        title\n        checked\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,i._)(["\n  subscription {\n    listDeleted\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,i._)(["\n  subscription {\n    listUpdated {\n      id\n      title\n      todos {\n        id\n        title\n        checked\n      }\n    }\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,i._)(["\n  subscription {\n    todoCreated {\n      id\n      title\n      checked\n      listId\n    }\n  }\n"]);return _templateObject3=function(){return e},e}function _templateObject4(){let e=(0,i._)(["\n  subscription {\n    todoDeleted {\n      id\n      listId\n    }\n  }\n"]);return _templateObject4=function(){return e},e}function _templateObject5(){let e=(0,i._)(["\n  subscription {\n    todoUpdated {\n      id\n      checked\n      listId\n    }\n  }\n"]);return _templateObject5=function(){return e},e}function _templateObject6(){let e=(0,i._)(["\n  subscription {\n    clearTodoCompleted {\n      id\n      todos {\n        id\n        title\n        checked\n      }\n    }\n  }\n"]);return _templateObject6=function(){return e},e}let c=(0,l.Ps)(_templateObject()),d=(0,l.Ps)(_templateObject1());(0,l.Ps)(_templateObject2());let s=(0,l.Ps)(_templateObject3()),a=(0,l.Ps)(_templateObject4()),u=(0,l.Ps)(_templateObject5()),p=(0,l.Ps)(_templateObject6());var m=n(6229),hooks_useTodoListSubscriptions=()=>{(0,o.m)(s,{onData:e=>{let{client:t,data:n}=e,r=n.data.todoCreated;if(!r){t.refetchQueries({include:[m.PC]});return}let{id:o,title:i,checked:l,listId:c}=r;t.cache.updateQuery({query:m.PC},e=>{let t=null==e?void 0:e.lists.map(e=>e.id===c?{...e,todos:[...e.todos,{id:o,title:i,checked:l}]}:e);return{lists:t}})},onError:e=>console.error("Subscription error (TODO_CREATED_SUBSCRIPTION):",e)}),(0,o.m)(u,{onData:e=>{let{client:t,data:n}=e,r=n.data.todoUpdated;if(!r){t.refetchQueries({include:[m.PC]});return}let{id:o,listId:i,checked:l}=r;t.cache.updateQuery({query:m.PC},e=>{let t=null==e?void 0:e.lists.map(e=>e.id===i?{...e,todos:e.todos.map(e=>e.id===o?{...e,checked:l}:e)}:e);return{lists:t}})},onError:e=>console.error("Subscription error (LIST_DELETED_SUBSCRIPTION):",e)}),(0,o.m)(a,{onData:e=>{let{client:t,data:n}=e,r=n.data.todoDeleted;if(!r){t.refetchQueries({include:[m.PC]});return}let{id:o,listId:i}=r;t.cache.updateQuery({query:m.PC},e=>{let t=null==e?void 0:e.lists.map(e=>e.id===i?{...e,todos:e.todos.filter(e=>e.id!==o)}:e);return{lists:t}})},onError:e=>console.error("Subscription error (TODO_DELETED_SUBSCRIPTION):",e)}),(0,o.m)(c,{onData:e=>{let{client:t,data:n}=e,r=n.data.listCreated;if(!r){t.refetchQueries({include:[m.PC]});return}t.cache.updateQuery({query:m.PC},e=>({lists:[...e.lists,r]}))},onError:e=>console.error("Subscription error (LIST_CREATED_SUBSCRIPTION):",e)}),(0,o.m)(d,{onData:e=>{let{client:t,data:n}=e,r=n.data.listDeleted;if(!r){t.refetchQueries({include:[m.PC]});return}t.cache.updateQuery({query:m.PC},e=>({lists:e.lists.filter(e=>e.id!==r)}))},onError:e=>console.error("Subscription error (LIST_DELETED_SUBSCRIPTION):",e)}),(0,o.m)(p,{onData:e=>{let{client:t,data:n}=e,r=n.data.clearTodoCompleted;if(!r){t.refetchQueries({include:[m.PC]});return}let{id:o}=r;t.cache.updateQuery({query:m.PC},e=>{let t=null==e?void 0:e.lists.map(e=>e.id===o?{...e,todos:[]}:e);return{lists:t}})},onError:e=>console.error("Subscription error (CLEAR_COMPLETED_SUBSCRIPTION):",e)})},_=n(8458);function styled_templateObject(){let e=(0,i._)(["\n  margin-block-start: 100px;\n"]);return styled_templateObject=function(){return e},e}function styled_templateObject1(){let e=(0,i._)(["\n  font-weight: bold;\n"]);return styled_templateObject1=function(){return e},e}function styled_templateObject2(){let e=(0,i._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 0px;\n"]);return styled_templateObject2=function(){return e},e}function styled_templateObject3(){let e=(0,i._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return styled_templateObject3=function(){return e},e}function styled_templateObject4(){let e=(0,i._)(["\n  position: relative;\n"]);return styled_templateObject4=function(){return e},e}function styled_templateObject5(){let e=(0,i._)(["\n      font-weight: bold;\n    "]);return styled_templateObject5=function(){return e},e}function styled_templateObject6(){let e=(0,i._)(["\n  padding: 0 10px;\n  cursor: pointer;\n\n  ","\n"]);return styled_templateObject6=function(){return e},e}function _templateObject7(){let e=(0,i._)(["\n  margin-block-start: 20px;\n"]);return _templateObject7=function(){return e},e}function _templateObject8(){let e=(0,i._)([""]);return _templateObject8=function(){return e},e}function _templateObject9(){let e=(0,i._)(["\n  margin-block-end: 20px;\n  padding: 30px;\n  box-shadow: 2px 2px 10px rgba(216 224 237 / 80%);\n  ","\n"]);return _templateObject9=function(){return e},e}function _templateObject10(){let e=(0,i._)(["\n  border-block-end: 1px solid #000;\n"]);return _templateObject10=function(){return e},e}function _templateObject11(){let e=(0,i._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  block-size: 40px;\n  margin-block-start: 10px;\n"]);return _templateObject11=function(){return e},e}function _templateObject12(){let e=(0,i._)(["\n  display: flex;\n  align-items: center;\n  margin-block-end: 10px;\n  padding-block-end: 5px;\n  border-block-end: 1px solid #000;\n"]);return _templateObject12=function(){return e},e}function _templateObject13(){let e=(0,i._)(["\n  flex-grow: 1;\n  flex-shrink: 0;\n  padding-inline-start: 15px;\n  font-size: 24px;\n"]);return _templateObject13=function(){return e},e}function _templateObject14(){let e=(0,i._)(["\n  cursor: pointer;\n"]);return _templateObject14=function(){return e},e}function _templateObject15(){let e=(0,i._)(["\n  svg {\n    &:only-child {\n      margin: 0;\n    }\n\n    &:not(:first-child) {\n      margin-inline-start: 5px;\n    }\n\n    &:not(:last-child) {\n      margin-inline-end: 5px;\n    }\n\n    &:not(:first-child):not(:last-child) {\n      margin: 0 5px;\n    }\n  }\n"]);return _templateObject15=function(){return e},e}function _templateObject16(){let e=(0,i._)(["\n  margin: 10px;\n"]);return _templateObject16=function(){return e},e}let b=_.zo.div(styled_templateObject()),f=_.zo.div(styled_templateObject1()),j=_.zo.div(styled_templateObject2()),O=_.zo.div(styled_templateObject3()),h=_.zo.div(styled_templateObject4()),x=_.zo.span(styled_templateObject6(),e=>e.$active&&(0,_.iv)(styled_templateObject5())),y=_.zo.div(_templateObject7()),g=_.zo.div(_templateObject9(),e=>e.$isOpened&&(0,_.iv)(_templateObject8())),C=_.zo.div(_templateObject10()),k=_.zo.div(_templateObject11()),T=_.zo.div(_templateObject12()),v=_.zo.span(_templateObject13()),I=_.zo.div(_templateObject14()),E=_.zo.div(_templateObject15()),P=_.zo.div(_templateObject16());var components_Todos=e=>{let{children:t}=e;return(0,r.jsx)(b,{children:t&&t})},Layouts_Content=e=>{let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"container",children:t})})},F=n(2104),w=n(8149),D=n(1527),L=n(856),Todos_TodoHeader=e=>{let{children:t}=e,n=(0,L.T)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(O,{children:[t&&t,(0,r.jsx)(F.HF,{width:20,height:20,type:"add",onClick:()=>n((0,w.Lc)({modalType:D.N}))})]})})},S=n(4429),z=n(6252),B=n(319),N=n(6388),Icons_IconArrow=e=>{let{...t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 451.847 451.847",...t,children:(0,r.jsx)("path",{d:"M225.923 354.706c-8.098 0-16.195-3.092-22.369-9.263L9.27 151.157c-12.359-12.359-12.359-32.397 0-44.751 12.354-12.354 32.388-12.354 44.748 0l171.905 171.915 171.906-171.909c12.359-12.354 32.391-12.354 44.744 0 12.365 12.354 12.365 32.392 0 44.751L248.292 345.449c-6.177 6.172-14.274 9.257-22.369 9.257z"})})})};function fragments_templateObject(){let e=(0,i._)(["\n  fragment SelectedFilterField on List {\n    selectedFilter\n  }\n"]);return fragments_templateObject=function(){return e},e}function fragments_templateObject1(){let e=(0,i._)(["\n  fragment SelectedActiveTodoCountField on List {\n    activeTodoCount\n  }\n"]);return fragments_templateObject1=function(){return e},e}let Q=(0,l.Ps)(fragments_templateObject()),U=(0,l.Ps)(fragments_templateObject1());var Todos_TodoActiveCount=e=>{let{listId:t}=e,n=(0,z.x)(),{activeTodoCount:o}=n.readFragment({id:n.cache.identify({__typename:"List",id:t}),fragment:U});return(0,r.jsxs)(f,{children:[o," items left"]})},R=n(7294),A=n(2546),Todos_TodoFilter=e=>{let{listId:t}=e,n=(0,z.x)(),{selectedFilter:o}=n.readFragment({id:n.cache.identify({__typename:"List",id:t}),fragment:Q}),[i,l]=(0,R.useState)(o),handleFilterClick=e=>{n.writeFragment({id:n.cache.identify({__typename:"List",id:t}),fragment:Q,data:{selectedFilter:e}}),l(e)};return(0,r.jsxs)(h,{children:[(0,r.jsx)(x,{$active:i===A.hV,onClick:()=>handleFilterClick(A.hV),children:A.hV}),(0,r.jsx)(x,{$active:i===A.bt,onClick:()=>handleFilterClick(A.bt),children:A.bt}),(0,r.jsx)(x,{$active:i===A.Kc,onClick:()=>handleFilterClick(A.Kc),children:A.Kc})]})},Todos_TodoClear=e=>{let{listId:t,text:n="Clear completed"}=e,[o]=(0,B.D)(m.DU,{variables:{id:t},onError:e=>console.error("Error clear completed:",e)});return(0,r.jsx)(I,{onClick:()=>o(),children:n})};function keyframes_templateObject(){let e=(0,i._)(["\n    100% {\n        stroke-dashoffset: 0;\n    }\n"]);return keyframes_templateObject=function(){return e},e}function keyframes_templateObject1(){let e=(0,i._)(["\n    0% {\n        opacity: 1;\n    }\n    100% {\n        opacity: 0.2;\n    }\n"]);return keyframes_templateObject1=function(){return e},e}function keyframes_templateObject2(){let e=(0,i._)(["\n    0% {\n        border-radius: 50%;\n    }\n\n    12.5% {\n        transform: rotate(45deg);\n        border-radius: 0 50% 50% 50%;\n    }\n\n    25% {\n        transform: rotate(90deg);\n        border-radius: 0 0 50% 50%;\n    }\n\n    37.5% {\n        transform: rotate(135deg);\n        border-radius: 0 0 0 50%;\n    }\n\n    50% {\n        transform: rotate(180deg);\n        border-radius: 0;\n    }\n\n    62.5% {\n        transform: rotate(225deg);\n        border-radius: 50% 0 0 0;\n    }\n\n    75% {\n        transform: rotate(270deg);\n        border-radius: 50% 50% 0 0;\n    }\n\n    87.5% {\n        transform: rotate(315deg);\n        border-radius: 50% 50% 50% 0;\n    }\n\n    100% {\n        transform: rotate(360deg);\n        border-radius: 50%;\n    }\n"]);return keyframes_templateObject2=function(){return e},e}let q=(0,_.F4)(keyframes_templateObject()),H=(0,_.F4)(keyframes_templateObject1());function InputCheckbox_templateObject(){let e=(0,i._)(["\n  display: flex;\n  flex-grow: 1;\n  flex-shrink: 0;\n  align-items: center;\n  cursor: pointer;\n"]);return InputCheckbox_templateObject=function(){return e},e}function InputCheckbox_templateObject1(){let e=(0,i._)(["\n  padding-left: 15px;\n  opacity: 1;\n  font-size: 18px;\n"]);return InputCheckbox_templateObject1=function(){return e},e}function InputCheckbox_templateObject2(){let e=(0,i._)(["\n  display: none;\n  &:checked + "," {\n    svg {\n      animation: "," 0.2s cubic-bezier(0.65, 0, 0.45, 1) 0.2s forwards;\n    }\n    "," {\n      text-decoration: line-through;\n      text-decoration-color: #000000;\n      animation: "," 0.2s cubic-bezier(0.65, 0, 0.45, 1) 0.2s forwards;\n    }\n  }\n"]);return InputCheckbox_templateObject2=function(){return e},e}(0,_.F4)(keyframes_templateObject2());let $=_.zo.label(InputCheckbox_templateObject()),M=_.zo.span(InputCheckbox_templateObject1()),K=_.zo.input(InputCheckbox_templateObject2(),$,q,M,H);var ui_InputCheckbox=e=>{let{title:t,children:n,...o}=e,{onClick:i,id:l,...c}=o;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K,{...c,id:l,readOnly:!0,type:"checkbox"}),(0,r.jsxs)($,{htmlFor:l,onClick:i,children:[(0,r.jsx)(F.bM,{}),(0,r.jsx)(M,{children:t})]})]})},Todos_Todo=e=>{let{listId:t,todo:n}=e,{title:o,checked:i,id:l}=n,[c]=(0,B.D)(m.Iy,{onError:e=>console.error("Error delete todo:",e)}),[d]=(0,B.D)(m.Iu,{onError:e=>console.error("Error update todo:",e)});return(0,r.jsxs)(j,{children:[(0,r.jsx)(ui_InputCheckbox,{title:o,checked:i,onClick:()=>d({variables:{id:l,listId:t}})}),(0,r.jsx)(F.HF,{width:20,height:20,type:"remove",onClick:()=>c({variables:{id:l,listId:t}})})]})};function TodoBody_templateObject(){let e=(0,i._)(["\n        fragment IsOpenedField on List {\n          isOpened\n        }\n      "]);return TodoBody_templateObject=function(){return e},e}function TodoBody_templateObject1(){let e=(0,i._)(["\n          fragment IsOpenedField on List {\n            isOpened\n          }\n        "]);return TodoBody_templateObject1=function(){return e},e}var Todos_TodoBody=()=>{let e=(0,L.T)(),t=(0,z.x)(),[n]=(0,B.D)(m.qB,{onError:e=>console.error("Error remove list:",e)}),{data:o,loading:i,error:c}=(0,N.aM)(m.PC),toggleIsOpened=e=>{let n=t.readFragment({id:t.cache.identify({__typename:"List",id:e}),fragment:(0,l.Ps)(TodoBody_templateObject())});n&&t.writeFragment({id:t.cache.identify({__typename:"List",id:e}),fragment:(0,l.Ps)(TodoBody_templateObject1()),data:{isOpened:!n.isOpened}})};return i?(0,r.jsx)("p",{children:"Loading..."}):c?(0,r.jsxs)("p",{children:["Error: ",c.message]}):(0,r.jsx)(y,{children:o.lists.length>0?o.lists.map(t=>(0,r.jsxs)(g,{$isOpened:t.isOpened,children:[(0,r.jsxs)(T,{children:[(0,r.jsx)(Icons_IconArrow,{width:20,height:20,onClick:()=>toggleIsOpened(t.id)}),(0,r.jsx)(v,{onClick:()=>toggleIsOpened(t.id),children:t.title}),(0,r.jsxs)(E,{children:[(0,r.jsx)(F.HF,{width:20,height:20,type:"add",onClick:()=>e((0,w.Lc)({modalType:D.H,modalProps:{listId:t.id}}))}),(0,r.jsx)(F.HF,{width:20,height:20,type:"remove",onClick:()=>n({variables:{id:t.id}})})]})]}),t.isOpened&&(0,r.jsx)(C,{children:t.todos&&t.todos.length>0?t.todos.map(e=>(0,r.jsx)(Todos_Todo,{listId:t.id,todo:e},e.id)):(0,r.jsx)(P,{children:"Список задач пока пустой"})}),(0,r.jsxs)(k,{children:[(0,r.jsx)(Todos_TodoActiveCount,{listId:t.id}),(0,r.jsx)(Todos_TodoFilter,{listId:t.id}),(0,r.jsx)(Todos_TodoClear,{listId:t.id})]})]},t.id)):(0,r.jsx)(S.Z,{title:"Список задач пуст",type:"h2"})})},pages=()=>(hooks_useTodoListSubscriptions(),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Layouts_Content,{children:(0,r.jsxs)(components_Todos,{children:[(0,r.jsx)(Todos_TodoHeader,{children:(0,r.jsx)(S.Z,{title:"Todos",type:"h1"})}),(0,r.jsx)(Todos_TodoBody,{})]})})}))}},function(e){e.O(0,[171,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);